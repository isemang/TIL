# SQL과 NoSQL의 차이 및 확장(Scaling)개념 설명
웹 앱 개발 시, 어떤 데이터베이스를 선택할지 고민하게 된다.
> MySQL같은 SQL을 사용해야하나, 아니면 MongoDB와 같은 NoSQL을 사용할까?

보통 Spring에서 개발할 땐 MySQL을, Node.js에서 개발할 땐 Mongo DB를 사용했을 것이다.
하지만 단순히 어떤 프레임워크를 이용하는지에 따라 DB를 결정하는것이 아니라, 프로젝트에 적합한 데이터베이스를 택해야 한다.

## RDBMS(관계형 DB)
SQL을 사용하고, RDBMS에서 데이터를 저장, 수정, 삭제 및 검색할 수 있다.

### 관계형 DB의 두 가지 특징
- 데이터는 **정해진 데이터 스키마에 따라 테이블에 저장**된다.
- 데이터는 **관계를 통해 여러 테이블에 분산**된다.

데이터는 테이블에 **레코드**로 저장되는데, 각 테이블마다 명확하게 정의된 구조가 있다.<br>
해당 구조는 필드의 이름과 데이터 유형으로 정의된다.


따라서 **스키마를 준수하지 않은 레코드는 테이블에 추가할 수 없다.** 즉, 스키마를 수정하지 않는 이상은 정해진 구조에 맞는 레코드만 추가가 가능한 것이 관계형 데이터베이스의 특징 중 하나다.


또한, 데이터의 중복을 피하기 위해 **'관계'** 를 이용한다.
![image](https://user-images.githubusercontent.com/52986346/148955763-c58137db-44b7-4415-8c15-5fc429d34742.png)
하나의 테이블에서 중복 없이 하나의 데이터만을 관리하기 때문에, 다른 테이블에서 부정확한 데이터를 다룰 위험이 없어지는 장점이 있다.

## NoSQL(비관계형 DB)
관계형 DB의 반대이다.
#### 스키마도 없고, 관계도 없다!!!


NoSQL에서는 레코드를 문서(documents)라고 부른다.

### SQL과의 핵심적인 차이
- SQL은 정해진 스키마를 따르지 않으면 데이터 추가가 불가능했지만, NoSQL에서는 다른 구조의 데이터를 같은 컬렉션에 추가가 가능하다.

### NoSQL의 레코드, "문서(documents)"
- Json과 비슷한 형태로 가지고 있음
- 관계형 DB처럼 여러 테이블에 나누어담지 않고, 관련 데이터를 동일한 '컬렉션'에 넣음
- 따라서 위쪽 사진의 SQL에서는 Orders, Users, Products 세 테이블로 나누던 것을 NoSQL에서는 한꺼번에 Orders에 포함해서 저장하게 됨

#### NoSQL: 여러 테이블에 조인할 필요 없이, 이미 필요한 모든 것을 갖춘 "문서(document)"를 작성하는 것!!

### NoSQL에서는 조인 개념도 존재하지 않는다
- 만약 조인하고 싶다면
> 컬렉션을 통해 데이터를 복제하여, 각 컬렉션 일부분에 속하는 데이터를 정확하게 산출하도록 함
- 이러는 경우 데이터가 중복되어 서로 영향을 줄 위험이 있음
- 따라서, **조인을 잘 사용하지 않고 자주 변경되지 않는 데이터일 때** NoSQL을 쓰면 효율적임


## 확장(Scaling)
- DB서버의 확장성은 '수직적'확장과 '수평적'확장으로 나뉘어짐
  - 수직적 확장 : 단순히 DB서버의 성능을 향상시키는 것(ex: CPU 업그레이드)
  - 수평적 확장 : 더 많은 서버가 추가되고, 데이터베이스가 전체적으로 분산됨을 의미(하나의 데이터베이스에서 작동하지만 여러 호스트에서 작동함)


데이터 저장 방식으로 인해 SQL 데이터베이스는 일반적으로 **수직적 확장**만 지원함.
> 수평적 확장은 NoSQL 데이터베이스에서만 가능

## 장, 단점 정리
### SQL의 장점
- 명확하게 정의된 스키마, 데이터 무결성 보장
- '관계'라는 개념이 존재하기 때문에 각 데이터를 중복없이 한번만 저장 가능

### SQL의 단점
- 덜 유연함. 데이터 스키마를 사전에 계획하고 알려야 하며, 나중에 수정하기가 힘듬
- 관계를 맺고 있기 때문에, 조인문이 많은 복잡한 쿼리가 만들어질 수 있음
- 대체로 수직적 확장만 가능함

### NoSQL의 장점
- 스키마가 없어서 유연함. 언제든지 저장된 데이터를 조정하고, 새로운 필드 추가 가능
- 데이터는 애플리케이션이 필요로 하는 형식으로 저장됨. 데이터 읽어오는 속도가 빨라짐
- 수직 및 수평 확장이 가능<br>
  -> 애플리케이션이 발생시키는 모든 읽기/쓰기 요청 처리 가능
  
### NoSQL 단점
- 유연성으로 인해 데이터 구조 결정을 미루게 될 수 있음
- 데이터 중복을 계속 업데이트 해야 함
- 데이터가 여러 컬렉션에 중복되어 있기 때문에, 수정 시 모든 컬렉션에서 수행해야 함<br>
  (SQL에서는 중복 데이터가 없으므로, 한 번만 수행이 가능)
  
  
## 그럼 어떤 경우에 어떤 DB를 사용해야 할까?
### SQL 데이터베이스 사용이 더 좋을 때
- 관계를 맺고 있는 데이터가 자주 변경되는 애플리케이션일 경우
> NoSQL에서는 여러 컬렉션을 모두 수정해야 하기 때문에 비효율적이다
- 변경될 여지가 없고, 명확한 스키마가 사용자와 데이터에게 중요한 경우

### NoSQL 데이터베이스 사용이 더 좋을 때
- 정확한 데이터 구조를 알 수 없거나 변경/확장 될 수 있는 경우
- 읽기를 자주 하지만, 데이터 변경은 자주 없는 경우
- 데이터베이스를 수평적으로 확장해야 하는 경우<br>
  (막대한 양의 데이터를 다뤄야 하는 경우)
___
[참고한 곳](https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Database/SQL%EA%B3%BC%20NOSQL%EC%9D%98%20%EC%B0%A8%EC%9D%B4.md)
